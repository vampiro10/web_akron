!function($){$.jfMagnify=function(t,e){function n(){h.css({"transform-origin":"top left","-ms-transform-origin":"top left","-webkit-transform-origin":"top left","-moz-transform-origin":"top left",transform:"scale("+a.settings.scale+","+a.settings.scale+")","-ms-transform":"scale("+a.settings.scale+","+a.settings.scale+")","-webkit-transform":"scale("+a.settings.scale+","+a.settings.scale+")","-moz-transform":"scale("+a.settings.scale+","+a.settings.scale+")",top:"0",width:p.get(0).getBoundingClientRect().width,height:p.get(0).getBoundingClientRect().height});var t=p.get(0).getBoundingClientRect().width,n=h.get(0).getBoundingClientRect().width,s=p.get(0).getBoundingClientRect().height,g=h.get(0).getBoundingClientRect().height;if(r=i(t,n),f=i(s,g),a.settings.scaleGlass){var v=y.get(0).getBoundingClientRect().width,w=y.get(0).getBoundingClientRect().height;u.css({width:v*r,height:w*f}),void 0!==e&&void 0!==e.center||void 0!==o&&void 0!==o.center||(a.settings.center=!1)}a.settings.center&&(d=h.parent().outerWidth()/2,c=h.parent().outerHeight()/2,l=u.outerWidth()/2,m=u.outerWidth()/2),a.update()}function i(t,e){var n;return n=t>e?e/t:t/e}function s(t){return-1*t}var a=this,g=$(t),o=g.data(),r,f,d=0,c=0,l=0,m=0,u,h,y,p,v={center:!0,scale:4,scaleGlass:!1,containment:t,magnifyGlass:".magnify_glass",magnifiedElement:".magnified_element",magnifiedZone:".magnify_glass",elementToMagnify:".element_to_magnify",onReady:function(){},onReadyArgs:[]};a.settings={},a.init=function(){a.settings=$.extend({},v,e,o),$(window).on("resize",n),u=g.find(a.settings.magnifyGlass),y=g.find(a.settings.magnifiedZone),p=g.find(a.settings.elementToMagnify);var t=p.clone(!0);h=$(t).removeAttr("id").addClass(a.settings.magnifiedElement.slice(1)),y.append(h),u.draggable({containment:a.settings.containment,drag:function(){a.update(),u.is(":animated")&&u.stop()}}),$("img").attr("draggable",!1),n(),a.settings.onReady.apply(a,a.settings.onReadyArgs)},a.update=function(){var t=s((u.position().left+l)/r),e=s((u.position().top+m)/f);h.css({left:t+d,top:e+c})},a.destroy=function(){$(window).off("resize",n),u.draggable("destroy"),h.remove(),g.removeData("jfMagnify",a),a=null},a.scaleMe=function(t){a.settings.scale=t,n()},a.init()},$.fn.jfMagnify=function(t){return this.each(function(){if(void 0===$(this).data("jfMagnify")){var e=new $.jfMagnify(this,t);$(this).data("jfMagnify",e)}})}}(jQuery);